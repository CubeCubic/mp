/* styles.css
   Deep ocean variant with mobile-friendly adjustments and player/album/track styles.
*/

/* Root variables */
:root{
  /* Deep ocean palette */
  --ocean-deep: #071428;
  --ocean-navy: #0f2b45;
  --ocean-teal: #0fb3a6;
  --ocean-sea: #2bb7a4;
  --ocean-coral: #ff7a66;
  --muted-ice: #dbeff0;
  --accent-color: var(--ocean-coral);
  --accent-2: var(--ocean-teal);
  --header-height: 64px;
  --header-padding-vertical: 6px;
  --badge-size: calc(var(--header-height) - 18px);
  --title-font-size: calc(var(--header-height) * 0.36);
  --header-player-controls-size: 36px;
  --header-player-cover-size: calc(var(--header-height) - 18px);
  --card-radius: 12px;
  --soft-shadow-neutral: 0 12px 36px rgba(2,8,14,0.55);
  --warm-accent-glow: 0 8px 28px rgba(255,122,102,0.14);
  --cover-border: 1px solid rgba(255,255,255,0.04);

  /* Позиционирование кнопки Refresh: подберите значение в px, чтобы кнопка попала между вашими красными линиями */
  --refresh-left: 18px;
}

/* Base layout and background */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: Arial, sans-serif;
  color: #fff;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background-color: var(--ocean-deep);
}
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -3;
  background: linear-gradient(135deg, var(--ocean-deep) 0%, var(--ocean-navy) 35%, var(--ocean-teal) 70%, var(--ocean-sea) 100%);
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  filter: saturate(1.06) contrast(1.04) brightness(0.96);
  will-change: filter;
}
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background: linear-gradient(180deg, rgba(3,6,10,0.40), rgba(6,10,14,0.46));
  pointer-events: none;
}

/* Site wrapper */
.site-wrapper {
  position: relative;
  z-index: 0;
  padding-top: calc(var(--header-height) + 12px);
  max-width: 1440px;
  margin: 0 auto;
  padding-left: 20px;
  padding-right: 20px;
  box-sizing: border-box;
}

/* Header */
header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-height);
  padding: var(--header-padding-vertical) 16px;
  display: grid;
  grid-template-columns: auto 1fr auto;
  align-items: center;
  gap: 12px;
  background: linear-gradient(180deg, rgba(11,43,69,0.86), rgba(15,47,74,0.78));
  color: var(--accent-color);
  z-index: 1001;
  box-sizing: border-box;
  backdrop-filter: blur(6px) saturate(1.04);
  -webkit-backdrop-filter: blur(6px) saturate(1.04);
  border-bottom: 1px solid rgba(255,255,255,0.03);
  overflow: visible;
}
header::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: 4px;
  z-index: 1002;
  background: linear-gradient(90deg, rgba(15,179,166,1) 0%, rgba(43,183,164,0.95) 50%, rgba(11,43,69,0.0) 100%);
  pointer-events: none;
  box-shadow: 0 4px 12px rgba(15,179,166,0.12);
}

/* Header left block */
#header-left {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
  grid-column: 1;
}
#header-badge {
  width: var(--badge-size);
  height: var(--badge-size);
}
#header-badge img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  border-radius: 6px;
  box-shadow: 0 12px 34px rgba(2,8,14,0.6), 0 6px 18px rgba(15,179,166,0.06);
}
header h1 {
  margin: 0;
  font-size: var(--title-font-size);
  font-weight: 800;
  line-height: 1;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  color: var(--accent-color);
  -webkit-text-stroke: 0.4px rgba(0,0,0,0.18);
  text-shadow:
    0 1px 0 rgba(0,0,0,0.14),
    0 3px 8px rgba(0,0,0,0.12),
    0 0 8px rgba(255,122,102,0.06);
  filter: drop-shadow(0 6px 12px rgba(255,122,102,0.05));
  transition: text-shadow 160ms ease, transform 160ms ease;
}
header h1 a#brand-link {
  color: var(--accent-color) !important;
  text-decoration: none;
  display: inline-block;
  font-size: inherit;
  font-weight: inherit;
  line-height: inherit;
}

/* Header player */
#header-player {
  grid-column: 2;
  display: flex;
  align-items: center;
  gap: 12px;
  justify-content: center;
  min-width: 320px;
  max-width: 1000%;
  box-sizing: border-box;
}
.header-player-cover {
  width: var(--header-player-cover-size);
  height: var(--header-player-cover-size);
  border-radius: 6px;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(15,179,166,0.10), rgba(11,43,69,0.06));
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 12px 34px rgba(2,8,14,0.6), 0 6px 18px rgba(15,179,166,0.05);
}
.header-player-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}
.player-info-header {
  display: flex;
  flex-direction: column;
  min-width: 0;
  max-width: 260px;
}
.player-title {
  font-size: 13px;
  font-weight: 700;
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.player-artist {
  font-size: 12px;
  color: var(--muted-ice);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.player-controls-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Player controls buttons */
.player-controls-header button {
  width: var(--header-player-controls-size);
  height: var(--header-player-controls-size);
  border-radius: 50%;
  border: none;
  background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  color: var(--accent-2);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  transition: transform 120ms ease, background 120ms ease, box-shadow 120ms ease;
}
.player-controls-header button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 26px rgba(2,8,14,0.44), 0 3px 10px rgba(15,179,166,0.04);
}

/* Global search */
#global-search {
  margin-top: 12px;
  margin-bottom: 20px;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid rgba(255,255,255,0.04);
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: #fff;
  font-size: 15px;
  width: 100%;
  box-sizing: border-box;
}

/* Controls and album header */
.controls {
  border-bottom: none;
  padding-bottom: 0;
  margin-bottom: 0;
}

/* Album header: контейнер относительный, чтобы кнопка могла позиционироваться внутри */
.album-header {
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 8px 0 12px 0;
}

/* Метка "ალბომები" — по умолчанию справа от кнопки, но позиция подстраивается ниже */
.album-header label {
  margin: 0;
  font-size: 16px;
  font-weight: bold;
  color: var(--accent-2);
  /* Сдвиг вправо, чтобы не перекрывать абсолютную кнопку; подгоняйте при необходимости */
  margin-left: calc(var(--refresh-left) + 140px);
}

/* Album header controls: кнопка Refresh и счётчик — визуально остаются внутри контейнера,
   но кнопка будет абсолютной и показана слева в пределах .album-header */
.album-header-controls {
  display: inline-flex;
  align-items: center;
  gap: 88px;
  order: 1;
  margin-left: 0;
}

/* Refresh button — абсолютное позиционирование внутри .album-header */
#refresh-btn {
  position: absolute;
  left: var(--refresh-left);
  top: 50%;
  transform: translateY(-50%);
  z-index: 5;
  background: var(--accent-color);
  color: #000;
  border: none;
  padding: 8px 12px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 10px 28px rgba(255,122,102,0.12);
  transition: transform 140ms ease, filter 140ms ease;
}
#refresh-btn:hover {
  transform: translateY(-50%) translateY(-3px);
  filter: brightness(0.98);
}

/* Tracks count — позиционируем относительно, чтобы не улетать при абсолютной кнопке.
   Подгоните значение (86px) под реальную ширину кнопки + желаемый gap */
.tracks-count {
  font-weight: 600;
  color: #ffffff;
  background: rgba(255,255,255,0.06);
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 0.95rem;
  border: 1px solid rgba(255,255,255,0.03);
  position: relative;
  margin-left: calc(var(--refresh-left) + 86px);
}

/* Hide redundant label for album-select */
.controls label[for="album-select"] {
  display: none;
}

/* Album list vertical */
.album-list-vertical {
  margin-top: 6px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.album-list-vertical .album-list-button {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: #f2f9f8;
  border: 1px solid rgba(15,179,166,0.06);
  padding: 14px 16px;
  border-radius: calc(var(--card-radius) - 2px);
  font-size: 16px;
  font-weight: 700;
  text-align: left;
  cursor: pointer;
  transition: transform 180ms ease, box-shadow 180ms ease, background 180ms ease;
  width: 100%;
  box-sizing: border-box;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  box-shadow: 0 10px 28px rgba(2,8,14,0.18);
}
.album-list-vertical .album-list-button:hover {
  transform: translateY(-6px);
  box-shadow: 0 22px 44px rgba(2,8,14,0.24), 0 6px 20px rgba(15,179,166,0.06);
  color: #000;
}
.album-list-vertical .album-list-button .track-count {
  background: rgba(0,0,0,0.10);
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 13px;
  color: #fff;
  min-width: 44px;
  text-align: center;
}

/* Main layout */
.new-main-layout {
  display: flex;
  gap: 24px;
  max-width: 1440px;
  margin: 0 auto;
  padding: 0 20px;
  box-sizing: border-box;
}
.albums-sidebar {
  flex: 0 0 260px;
  position: sticky;
  top: calc(var(--header-height) + 12px);
  align-self: flex-start;
  max-height: calc(100vh - (var(--header-height) + 40px));
  overflow-y: auto;
}
.tracks-section {
  flex: 1;
  min-width: 0;
  padding-top: 12px;
}
.tracks-header {
  margin-bottom: 0;
}
.tracks-header h2 {
  color: var(--accent-2);
  margin: 0 0 8px 0;
}

/* Tracks grid and cards */
#tracks.tracks-list-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  padding: 0 10px;
  box-sizing: border-box;
}
.tracks-list-grid .card {
  display: flex;
  flex-direction: column;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.03);
  border-radius: var(--card-radius);
  overflow: hidden;
  cursor: pointer;
  transition: transform 180ms ease, box-shadow 180ms ease;
  box-shadow: var(--soft-shadow-neutral);
}
.tracks-list-grid .card:hover {
  transform: translateY(-6px);
  box-shadow: 0 22px 52px rgba(2,8,14,0.28), var(--warm-accent-glow);
}
.tracks-list-grid .card.playing-track {
  background: linear-gradient(180deg, rgba(15,179,166,0.22), rgba(11,43,69,0.16));
  border: 2.5px solid rgba(255,122,102,0.30);
  box-shadow:
    0 36px 96px rgba(2,8,14,0.62),
    0 16px 48px rgba(255,140,120,0.26),
    0 10px 30px rgba(15,179,166,0.16);
  transform: translateY(-10px) scale(1.05);
  transition: all 260ms cubic-bezier(.2,.9,.2,1);
  position: relative;
  z-index: 6;
  filter: drop-shadow(0 20px 60px rgba(255,140,120,0.18));
}
@keyframes deepOceanPulseBright {
  0%, 100% {
    box-shadow: 0 36px 96px rgba(2,8,14,0.62), 0 16px 48px rgba(255,140,120,0.26), 0 10px 30px rgba(15,179,166,0.16);
    transform: translateY(-10px) scale(1.05);
  }
  50% {
    box-shadow: 0 48px 120px rgba(2,8,14,0.68), 0 24px 64px rgba(255,160,140,0.34), 0 14px 40px rgba(15,179,166,0.22);
    transform: translateY(-12px) scale(1.06);
  }
}
.tracks-list-grid .card.playing-track.animate-deepocean {
  animation: deepOceanPulseBright 1800ms ease-in-out infinite;
}
.tracks-list-grid .track-cover {
  width: 100%;
  height: 180px;
  object-fit: contain;
  object-position: center;
  background-color: rgba(255,255,255,0.02);
  display: block;
  padding: 0;
  box-sizing: border-box;
  border-radius: 8px;
  border: var(--cover-border);
  box-shadow: 0 12px 36px rgba(2,8,14,0.22), 0 6px 20px rgba(255,122,102,0.08), 0 4px 14px rgba(15,179,166,0.06);
}

.tracks-list-grid .track-info {
  padding: 12px;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}
.tracks-list-grid .track-info h4 {
  margin: 0 0 6px 0;
  font-size: 15px;
  line-height: 1.3;
}
.tracks-list-grid .track-info div {
  font-size: 13px;
  color: var(--muted-ice);
  margin-bottom: 8px;
}
.tracks-list-grid .track-actions {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}
.tracks-list-grid .track-actions button {
  flex: 1;
  padding: 8px;
  font-size: 13px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  transition: transform 120ms ease, box-shadow 120ms ease;
}
.tracks-list-grid .track-actions button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 26px rgba(2,8,14,0.16), 0 3px 10px rgba(15,179,166,0.05);
}
.tracks-list-grid .btn-has-lyrics {
  background: linear-gradient(90deg, var(--ocean-coral, #ff7a66), #ff8f78);
  color: #000;
  font-weight: 700;
}
.tracks-list-grid .download-button {
  width: auto;
  height: auto;
  padding: 8px;
  background: #2ecc71;
}
.tracks-list-grid .download-button svg {
  width: 18px;
  height: 18px;
  fill: white;
}
/* Subalbum container and select */
.subalbum-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
#subalbum-label {
  font-size: 16px;
  font-weight: bold;
  color: var(--accent-2);
  margin: 0;
}
#subalbum-select {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  color: #f2f9f8;
  border: 1px solid rgba(15,179,166,0.06);
  padding: 11.9px 16px;
  border-radius: calc(var(--card-radius) - 2px);
  font-size: 16px;
  font-weight: 700;
  width: 100%;
  box-sizing: border-box;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%23f2f9f8' d='M4 6l4 4 4-4'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 16px center;
  padding-right: 40px;
  transition: transform 180ms ease, box-shadow 180ms ease, background 180ms ease;
  box-shadow: 0 10px 28px rgba(2,8,14,0.18);
}
#subalbum-select:hover {
  transform: translateY(-6px);
  box-shadow: 0 22px 44px rgba(2,8,14,0.24), 0 6px 20px rgba(15,179,166,0.06);
  color: #000;
}
#subalbum-select option {
  background: #111;
  color: #fff;
  padding: 10px;
}

/* Responsive: up to 1024px */
@media (max-width: 1024px) {
  .new-main-layout {
    flex-direction: column;
    gap: 20px;
  }
  .albums-sidebar {
    position: static;
    flex: none;
    max-height: none;
    overflow: visible;
  }
  #tracks.tracks-list-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  #header-player {
    max-width: 60%;
    min-width: 280px;
  }
}

/* Responsive: up to 768px */
@media (max-width: 768px) {
  :root {
    --header-height: 56px;
    --badge-size: 42px;
    --header-player-controls-size: 36px;
    --header-player-cover-size: 42px;
    --title-font-size: 24px;
  }

  header {
    padding: 8px 12px;
    gap: 8px;
  }

  #header-left {
    gap: 8px;
  }

  #header-player {
    gap: 8px;
    min-width: 0;
    max-width: 55%;
  }

  .player-title {
    font-size: 12px;
  }
  .player-artist {
    font-size: 11px;
  }

  .player-controls-header button {
    width: 36px;
    height: 36px;
    font-size: 15px;
  }

  .site-wrapper {
    padding-left: 12px;
    padding-right: 12px;
  }

  #global-search {
    font-size: 16px;
    padding: 12px;
  }

  .album-list-vertical .album-list-button,
  #subalbum-select {
    padding: 16px;
    font-size: 17px;
  }

  .tracks-header h2 {
    font-size: 20px;
  }

  #tracks.tracks-list-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .tracks-list-grid .track-cover {
    height: 200px;
  }

  .tracks-list-grid .track-info h4 {
    font-size: 17px;
  }

  .tracks-list-grid .track-info div {
    font-size: 14px;
  }

  .tracks-list-grid .track-actions button {
    padding: 12px;
    font-size: 14px;
  }

  button, .album-list-button, .card, #subalbum-select {
    min-height: 48px;
  }

  /* На мобильных возвращаем потоковое расположение кнопки Refresh и сбрасываем смещения */
  #refresh-btn {
    position: static;
    transform: none;
    margin-right: 8px;
  }
  .tracks-count {
    margin-left: 0;
  }
  .album-header label {
    margin-left: 0;
  }
}

/* Responsive: up to 480px */
@media (max-width: 480px) {
  header {
    grid-template-columns: auto 1fr;
  }
  #header-player {
    grid-column: 1 / -1;
    justify-content: flex-start;
    margin-top: 8px;
  }

  .player-controls-header {
    margin-left: auto;
  }
  #global-search {
    margin-bottom: 16px;
  }
  .album-list-vertical .album-list-button,
  #subalbum-select {
    padding: 18px 16px;
    font-size: 18px;
  }
}

/* Admin: hidden admin link */
#hidden-admin-link {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 48px;
  height: 32px;
  z-index: 1202;
  color: transparent;
  font-size: 0;
  text-indent: -9999px;
  overflow: hidden;
  background: transparent;
  border: none;
  cursor: pointer;
  pointer-events: auto;
}
#hidden-admin-link:hover::after {
  content: "Admin";
  position: absolute;
  top: 100%;
  right: 0;
  background: rgba(0,0,0,0.8);
  color: var(--accent-color);
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 14px;
  white-space: nowrap;
}
/* Modals: improved rules to ensure modal overlay sits above header and cover is positioned inside modal */
#lyrics-modal.hidden {
  display: none !important;
}
#lyrics-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.36);
  z-index: 4000; /* выше header и всех элементов интерфейса */
  pointer-events: auto;
}

/* Modal box: positioned container for absolute children (cover) */
.modal-box {
  position: relative;
  background: #ffffff;
  color: #000;
  padding: 18px;
  border-radius: 8px;
  max-width: 720px;
  width: 92%;
  max-height: 80vh;
  overflow: auto;
  box-shadow: 0 20px 60px rgba(0,0,0,0.45);
}
.modal-box h3 {
  margin-top: 0;
  font-size: 16px;
}
.modal-box pre {
  white-space: pre-wrap;
  font-size: 13px;
  margin-bottom: 0;
}

/* Маленькая обложка трека в модальном окне */
.modal-cover {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 72px;
  height: 72px;
  border-radius: 6px;
  overflow: hidden;
  z-index: 10;
  box-shadow: 0 6px 18px rgba(0,0,0,0.28);
  background: #eee; /* placeholder пока картинка не загрузится */
  flex: 0 0 auto;
}
.modal-cover img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  visibility: visible;
}

/* Toast */
#toast {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 90px;
  background: rgba(0,0,0,0.72);
  color: #fff;
  padding: 8px 12px;
  border-radius: 6px;
  z-index: 3000;
  font-size: 13px;
  opacity: 0;
  transition: opacity 180ms ease;
}
#toast.visible {
  opacity: 1;
}

/* === ADMIN: blinking animation for save button === */
@keyframes adminSaveBlink {
  0%   { box-shadow: 0 10px 28px rgba(198,40,40,0.18); filter: brightness(1); background: #c62828; }
  25%  { box-shadow: 0 10px 40px rgba(255,80,80,0.28); filter: brightness(1.06); background: linear-gradient(90deg,#c62828,#ff5252); }
  50%  { box-shadow: 0 10px 28px rgba(198,40,40,0.18); filter: brightness(0.92); background: #c62828; }
  75%  { box-shadow: 0 10px 40px rgba(255,80,80,0.28); filter: brightness(1.06); background: linear-gradient(90deg,#c62828,#ff5252); }
  100% { box-shadow: 0 10px 28px rgba(198,40,40,0.18); filter: brightness(1); background: #c62828; }
}

#btn-save-all.save-btn.blinking {
  animation: adminSaveBlink 1.2s linear infinite;
}

#btn-save-all.save-btn:focus-visible {
  outline: 3px solid rgba(255,255,255,0.12);
  outline-offset: 4px;
}

/* === Deep Ocean Footer === */
.site-footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: linear-gradient(90deg, #001f3f, #003366, #004466);
  border-top: 1px solid rgba(255,255,255,0.08);
  text-align: center;
  padding: 6px 12px;
  font-size: 13px;
  color: #cce7ff;
  z-index: 1000;
}

.site-footer a {
  color: #4dd0e1;
  text-decoration: none;
  margin: 0 12px;
  font-weight: 500;
}
.site-footer a:hover {
  color: #80deea;
  text-decoration: underline;
}
.site-footer p {
  margin: 0;
  display: inline-block;
}
.site-footer .icon {
  vertical-align: middle;
  margin: 0 4px;
}
.site-footer .icon svg {
  fill: #4dd0e1;
}

/* === Additional responsive rules (repeated blocks consolidated) === */

/* Small phones: до 480px */
@media (max-width: 480px) {
  .albums-sidebar {
    width: 100%;
    order: 2;
  }
  .tracks-section {
    width: 100%;
    order: 1;
  }
  header h1 {
    font-size: 18px;
  }
}

/* Medium devices: телефоны в горизонтали и небольшие планшеты (481px–768px) */
@media (max-width: 768px) {
  .albums-sidebar {
    width: 100%;
    margin-bottom: 16px;
  }
  .tracks-section {
    width: 100%;
  }
  header h1 {
    font-size: 20px;
  }
  #header-player {
    flex-wrap: wrap;
    gap: 8px;
  }
  .player-controls-header button {
    font-size: 14px;
  }
}

/* Tablets: 769px–1024px */
@media (max-width: 1024px) {
  .site-wrapper {
    padding: 0 12px;
  }
  .albums-sidebar {
    flex: 1 1 100%;
    max-width: 300px;
  }
  .tracks-section {
    flex: 1 1 calc(100% - 320px);
  }
  header h1 {
    font-size: 22px;
  }
  #global-search {
    font-size: 14px;
  }
}

/* Modal cover as card-like */
.modal-cover {
  position: relative;
  width: 100%;
  height: 180px;
  border-radius: 8px;
  overflow: hidden;
  margin-bottom: 16px;
  box-shadow: 0 12px 36px rgba(2,8,14,0.22),
              0 6px 20px rgba(255,122,102,0.08),
              0 4px 14px rgba(15,179,166,0.06);
  background: #eee;
}
.modal-cover img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  object-position: center;
  display: block;
}

/* === ADMIN: Reliable override for #btn-save-all ===
   This block must be last or near the end to ensure it overrides other rules.
   It intentionally targets the wrapper and the button with high specificity
   and uses !important only where necessary. */

/* Ensure wrapper centers its content */
.save-btn-wrapper {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

/* Highest-priority override for the save button itself */
#btn-save-all.save-btn,
.save-btn-wrapper #btn-save-all,
button.save-btn {
  display: inline-block !important;
  width: auto !important;
  max-width: none !important;
  box-sizing: border-box !important;
  padding: 8px 12px !important;
  background: #c62828 !important;
  color: #fff !important;
  border-radius: 6px !important;
  border: none !important;
  cursor: pointer !important;
  height: 36px !important;
  line-height: 20px !important;
  font-weight: 700 !important;
  font-size: 13px !important;
  box-shadow: 0 10px 28px rgba(198,40,40,0.18) !important;
  transition: transform 160ms ease, box-shadow 160ms ease, filter 160ms ease !important;
  overflow: visible !important;
}

/* Ensure inner text is not affected by other transforms */
#btn-save-all.save-btn .inner-text {
  display: inline-block !important;
  white-space: nowrap !important;
  pointer-events: none !important;
  transform: none !important;
}

/* Keep blinking and focus styles intact */
#btn-save-all.save-btn.blinking {
  animation: adminSaveBlink 1.2s linear infinite !important;
}
#btn-save-all.save-btn:focus-visible {
  outline: 3px solid rgba(255,255,255,0.12) !important;
  outline-offset: 4px !important;
}

/* Accessibility helpers */
.hidden {
  display: none !important;
}

/* Large monitors: от 1200px и выше */
@media (min-width: 1200px) {
  .site-wrapper {
    max-width: 1200px;
    margin: 0 auto;
  }
  .tracks-section {
    max-width: 900px;
    margin: 0 auto;
  }
  header h1 {
    font-size: 26px;
  }
  #header-player {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: calc(100% - 2 * 160px);
    max-width: none;
    margin: 0;
    padding: 10px 16px;
    box-sizing: border-box;
    z-index: 1002;
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: center;
  }
  header {
    position: fixed;
    overflow: visible;
    height: var(--header-height);
  }
}

/* Force header player to sit visually inside the header on all viewports */
header #header-player {
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: min(920px, 82%) !important;
  max-width: calc(100% - 140px) !important;
  box-sizing: border-box !important;
  z-index: 1003 !important;
  pointer-events: auto !important;
  margin: 0 !important;
  gap: 10px !important;
}

/* Reduce internal sizes if needed */
header #header-player .player-info-header { max-width: 36% !important; min-width: 0 !important; }
header #header-player .player-title { max-width: 100% !important; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
header #header-player .player-artist { max-width: 100% !important; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Responsive tweaks */
@media (max-width: 1024px) {
  header #header-player {
    width: min(760px, 84%) !important;
    max-width: calc(100% - 110px) !important;
  }
  header #header-player .player-info-header { max-width: 40% !important; }
}

@media (max-width: 768px) {
  header #header-player {
    width: calc(100% - 28px) !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    max-width: none !important;
    padding: 0 8px !important;
    gap: 8px !important;
  }
  header #header-player .player-info-header { max-width: 52% !important; }
  header #header-player .player-title { font-size: 13px !important; }
  header #header-player .player-artist { font-size: 12px !important; }
}

@media (max-width: 480px) {
  header #header-player {
    position: absolute !important;
    left: 50% !important;
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
    width: calc(100% - 24px) !important;
    padding: 0 6px !important;
    gap: 6px !important;
  }
  header #header-player .player-info-header { display: none !important; }
  header #header-player .header-player-cover { margin-right: 6px !important; }
  header h1 { padding-right: 10px; }
}
/* === Extra scroll space to avoid footer overlap === */
.site-wrapper,
.tracks-section {
  padding-bottom: 80px; /* запас под фиксированный футер */
}
/* Back-to-top button */
.back-to-top-wrapper {
  text-align: center;
  margin: 30px 0; /* отступ сверху и снизу */
}

#back-to-top {
  background: var(--accent-color);
  color: #071428; /* темный текст для контраста на светлом акценте */
  border: none;
  padding: 10px 18px;
  border-radius: 8px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition: transform 140ms ease, filter 140ms ease;
}

#back-to-top:hover {
  transform: translateY(-3px);
  filter: brightness(0.95);
}
